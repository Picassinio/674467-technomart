var feedback=document.querySelector(".address-contact");var popup=document.querySelector(".modal-feedback");var close=popup.querySelector(".modal-close");var form=popup.querySelector("form");var username=popup.querySelector(".feedback-name");var mail=popup.querySelector(".feedback-mail");var isStorageSupport=true;var storage="";var mapLink=document.querySelector(".button-modal-map");var mapPopup=document.querySelector(".modal-map");var mapClose=mapPopup.querySelector(".modal-close");var bookMarksLink=document.querySelectorAll(".cart-button");var bookMarksPopup=document.querySelector(".modal-bookmarks");var bookMarksClose=bookMarksPopup.querySelector(".modal-close");try{storage=localStorage.getItem("username")}catch(err){isStorageSupport=false}feedback.addEventListener("click",function(a){a.preventDefault();popup.classList.add("modal-show");if(storage){feedback.value=storage;password.focus()}else{username.focus()}});close.addEventListener("click",function(a){a.preventDefault();popup.classList.remove("modal-show");popup.classList.remove("modal-error")});form.addEventListener("submit",function(a){if(!username.value||!mail.value){a.preventDefault();popup.classList.remove("modal-error");popup.offsetWidth=popup.offsetWidth;popup.classList.add("modal-error")}else{if(isStorageSupport){localStorage.setItem("username",username.value)}}});window.addEventListener("keydown",function(a){if(a.keyCode===27){a.preventDefault();if(popup.classList.contains("modal-show")){popup.classList.remove("modal-show");popup.classList.remove("modal-error")}}});mapLink.addEventListener("click",function(a){a.preventDefault();mapPopup.classList.add("modal-show")});mapClose.addEventListener("click",function(a){a.preventDefault();mapPopup.classList.remove("modal-show")});window.addEventListener("keydown",function(a){if(a.keyCode===27){a.preventDefault();if(mapPopup.classList.contains("modal-show")){mapPopup.classList.remove("modal-show")}}});for(var i=0;i<bookMarksLink.length;i++){bookMarksLink[i].addEventListener("click",function(a){a.preventDefault();bookMarksPopup.classList.add("modal-show")})}bookMarksClose.addEventListener("click",function(a){a.preventDefault();bookMarksPopup.classList.remove("modal-show")});window.addEventListener("keydown",function(a){if(a.keyCode===27){a.preventDefault();if(bookMarksPopup.classList.contains("modal-show")){bookMarksPopup.classList.remove("modal-show")}}});